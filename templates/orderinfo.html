
{% include "header_include2.html" %}

	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  	  <link rel="stylesheet" href="/static/css/dashboard.css?v=1">

<div class="bb-alert alert alert-info alert-dismissible" style="display: none;">
    <button type="button" class="close close_button" data-dismiss="alert" aria-label="Close">&times;</button>
    <span class="al_center">Info</span>
</div>
<div class="bb-alert-success alert alert-success alert-dismissible" style="display: none;">
    <button type="button" class="close close_button" data-dismiss="alert" aria-label="Close">&times;</button>
    <span class="al_center">Success</span>
</div>
<div class="bb-alert-warning alert alert-warning alert-dismissible" style="display: none;">
    <button type="button" class="close close_button" data-dismiss="alert" aria-label="Close">&times;</button>
    <span class="al_center">Warning</span>
</div>
<div class="bb-alert-danger alert alert-danger alert-dismissible" style="display: none;">
    <button type="button" class="close close_button" data-dismiss="alert" aria-label="Close">&times;</button>
    <span class="al_center">Danger</span>
</div>
<div id="load_content_page" style="display: none;"></div>
<div id="dashboard">
	{% for order in orderslist %}
		<h1>Order id: {{order.uid}}</h1>

	{% endfor %}
	<div class="dash-container" style="max-width: 1000px;">
		<div class="dash-sidebar">
        <ul>
          	<li>
	          <a href="/order" class="three-d">
	            <i class="dash-icon flaticon-I"></i>NEW ORDER
	            <span aria-hidden="true" class="three-d-box">
	              <span class="front"><i class="dash-icon flaticon-I"></i>NEW ORDER</span>
	              <span class="back"><i class="dash-icon flaticon-I"></i>NEW ORDER</span>
	            </span>
	          </a>
	        </li>
	        <li>
	          <a href="/dashboard" class="three-d">
	            <i class="dash-icon flaticon-C"></i>MY ORDERS
	            <span aria-hidden="true" class="three-d-box">
	              <span class="front"><i class="dash-icon flaticon-C"></i>MY ORDERS</span>
	              <span class="back"><i class="dash-icon flaticon-C"></i>MY ORDERS</span>
	            </span>
	          </a>
	        </li>
	        <li>
	          <a href="/transactions" class="three-d">
	            <i class="dash-icon flaticon-H"></i>TRANSACTIONS
	            <span aria-hidden="true" class="three-d-box">
	              <span class="front"><i class="dash-icon flaticon-H"></i>TRANSACTIONS</span>
	              <span class="back"><i class="dash-icon flaticon-H"></i>TRANSACTIONS</span>
	            </span>
	          </a>
	        </li>
	        <li>
	          <a href="/profile" class="three-d">
	            <i class="dash-icon flaticon-G"></i>MY SETTINGS
	            <span aria-hidden="true" class="three-d-box">
	              <span class="front"><i class="dash-icon flaticon-G"></i>MY SETTINGS</span>
	              <span class="back"><i class="dash-icon flaticon-G"></i>MY SETTINGS</span>
	            </span>
	          </a>
	        </li>
	        <li>
	          <a href="/logout" class="three-d">
	            <i class="dash-icon flaticon-F"></i>LOGOUT
	            <span aria-hidden="true" class="three-d-box">
	              <span class="front"><i class="dash-icon flaticon-F"></i>LOGOUT</span>
	              <span class="back"><i class="dash-icon flaticon-F"></i>LOGOUT</span>
	            </span>
	          </a>
	        </li>
        </ul>
      </div>
		<div id="dash-order" class="dash-content">
			<div class="dash-order-header">
				<div class="dash-order-item-anchor open-anchor" data-to="details">Order details</div>
				<div class="dash-order-item-anchor" data-to="messages">Messages</div>
				<div class="dash-order-item-anchor" data-to="files">Files</div>
			</div>
			<div class="dash-order-body">
				{% for order in orderslist %}
				<div class="dash-order-body-item active-order-body" data-name="details">
					{% if order.id_order_status == 1 %}
					<p class="info-p" style="padding-bottom: 0;">We are ready to start working on your paper as soon as the payment is made.
						We accept any major Debit/Credit cards and PayPal. Click <strong><a href="{{ url_for('paypal_redirect', orderid=order.uid) }}" target="_blank">Pay Now</a></strong> to procee to the secure payment page.</p>
					<p class="info-p">
						If you want to change the initial requirements for this order, press the “Edit Order” link and indicate all the necessary changes in a pop-up window. 
					</p>
					<div class="control-buttons" style="margin-bottom: 20px;">
						<a href="{{ url_for('paypal_redirect', orderid=order.uid) }}" class="control-buttons-pay" target="_blank">Pay now!</a>
						<button class="edit-order" id="bt_edit_order">Edit order</button>
					</div>
					{% elif order.id_order_status == 2 %}
					<p class="info-p">
						Success! We received the payment for your order. A writer will be assigned shortly.<br/>
						Once completed, your order will become available for download from your personal account page. A copy of your paper will also be emailed to you. 
					</p>
					{% elif order.id_order_status == 3 %}
					<p class="info-p">
						The writer was assigned and is now working on your paper. Should they have any concerns regarding your order, we will contact you promptly.<br/>
						Once completed, your order will become available for download from your personal account page. A copy of your paper will also be emailed to you. 
					</p>
					{% elif order.id_order_status == 5 %}
					<p class="info-p">
						We have successfully completed your order. It is available for download from your personal account page.
						A copy of your paper was also emailed to you at <strong>{{customer_email}}</strong>
					</p>
					{% elif order.id_order_status == 6 %}
					<p class="info-p">
						Unfortunately, we were unable to complete your paper. The reasons for that may vary greatly.<br/>
						For additional information, please contact us via live-chat or email. We will put every effort to resolve your problem as soon as possible.
					</p>
					{% elif order.id_order_status == 8 %}
					<p class="info-p">
						This order was canceled as per your request.<br/>
						If you believe that there was a mistake, please contact us via email or live-chat.
					</p>
					{% elif order.id_order_status == 9 %}
					<p class="info-p">
						Some information necessary to complete your order successfully is either missing or unavailable.
						<br/>
						We sent you an email regarding this issue and are waiting for your reply.
					</p>
					{% elif order.id_order_status == 10 %}
					<p class="info-p">
						We have recently introduced changes to your order as per your request. 
						<ul style="margin: 0 0 0 10px;">
							{% if  (order.deadline | ShowDateFormat) != (order.deadline_extr_ord | ShowDateFormat) %}<li class="li_dot">Deadline: {{order.deadline | ShowDateFormat}} -->  {{order.deadline_extr_ord | ShowDateFormat}}</li>{% endif %}
							{% if  (order.pages != order.pages_extr_ord) %}<li class="li_dot">Volume: {{order.pages}} page(s) --> {{order.pages_extr_ord}} page(s)</li>{% endif %}
							{% if  ((order.level | lower) != (order.id_acad_lvl_extr_ord | TargetWork | lower)) %}<li class="li_dot">Academic level: {{order.level}} --> {{order.id_acad_lvl_extr_ord | TargetWork}}</li>{% endif %}
							<li class="li_dot">Additional Price: $ {{order.final_order_surcharge}}</li>
						</ul>
						Once the difference is covered, your order will be updated.
					</p>
                    <div class="control-buttons">
                    	<a href="{{ url_for('paypal_redirect', orderid=order.uid) }}" class="{% if order.can_pay_extra_orders==1 %} disabled {% endif %} control-buttons-pay" target="_blank">Pay now!</a>
                    </div>
					{% endif %}
					<form action="#" class="form static-form" method="POST">
                        {% if (order.id_order_status > 1) %}
                            {% if (order.id_order_status == 5) %}
                            <div class="control-buttons" style="margin-bottom: 20px;">
                            	{% if (order.revision == 0) %}
                                    <a href="#" class="control-buttons-pay revision" id="bt_rev">Submit for Revision</a>
                                {% else %}
	                                <a href="#" disabled="disabled" class="disabled control-buttons-pay" title="Revision request can only be submitted within 14 days from your order deadline." id="bt_rev">Submit for Revision</a>
                                {% endif %}
                            </div>
                            {% endif %}
                        {% else %}
                    	{% endif %}
						<div class="dooble-form">
							<div class="dash-form-group">
								<label>
									Type work
									<input type="text" name="typeWork_" id="typeWork_" value="{% if (order.type_work == 1) %}Writing from scratch{% elif (order.type_work == 2) %}Editing{% elif (order.type_work == 3) %}Presentations{% endif %}" readonly>
									<input type="hidden" name="typeWork" id="typeWork" value="{{order.type_work}}">
								</label>
							</div>
							<div class="dash-form-group">
								<label>
									Assignment type
									<input type="text" name="assigmenttype" id="assigmenttype" value="{{order.assignment}}" readonly>
									<input type="hidden" name="assigmenttypeid" id="assigmenttypeid" value="{{order.id_assignment}}" readonly>
								</label>
							</div>
						</div>
						<div class="dooble-form">
							<div class="dash-form-group">
								<label>
									Subject
									<input type="text" name="subject" id="subject_p" value="{{order.subject}}" readonly>
									<input type="hidden" name="subjectid" id="subjectid" value="{{order.id_subject}}" readonly>
								</label>
							</div>
							<div class="dash-form-group">
								<label>
									Title
									{% autoescape false %}
										<input type="text" name="title" id="title" value="{{order.topic}}" readonly>
									{% endautoescape %}
								</label>
							</div>
						</div>
						<div class="dooble-form">
							<div class="dash-form-group">
								<label class="control-label">
									Paper format
									<input type="text" name="paperformat"  id="paperformat" value="{{order.paper_format}}" readonly>
								</label>
							</div>
							<div class="dash-form-group">
								<label>
									Academic level
									<input type="text" name="academiclevel"  id="academiclevel" value="{% if order.id_extr_ord and order.id_order_status == 10 and  order.can_pay_extra_orders == 0 %}{{order.id_acad_lvl_extr_ord | TargetWork}}{% else %}{{order.level}}{% endif %}" readonly>
									<input type="hidden" name="academiclevelid" id="academiclevelid" value="{{order.id_academic_level}}" readonly>
								</label>
							</div>
						</div>
						<div class="triable-form">
							<div class="dash-form-group">
								<label>
									Number of pages
									<input type="text" name="numberofpages"  id="numberofpages" value="{% if order.id_extr_ord and order.id_order_status == 10 and  order.can_pay_extra_orders == 0 %}{{order.pages_extr_ord}}{% else %}{{order.pages}}{% endif %}" readonly>
								</label>
							</div>
							<div class="dash-form-group">
								<label>
									Number of sources
									<input type="text" name="numberofsources"  id="numberofsources" value="{{order.sources}}" readonly>
								</label>
							</div>
							{% if (order.type_work != 3) %}
							<div class="dash-form-group">
								<label>
									Spacing
									<input type="text" name="spaceinordertext"  id="spaceinordertext" value="{% if (order.spaced == 1) %}Single spaced{% else %}Double spaced{% endif %}" readonly>
									<input type="hidden" name="spaceinorder"  id="spaceinorder" value="{{order.spaced}}" readonly>
								</label>
							</div>
	                        {% endif %}
						</div>
						<div class="dooble-form">
							<div class="dash-form-group">
								<label>
									Deadline
									<input type="text" name="deadline" id="deadline" value="{% if order.id_extr_ord and order.id_order_status == 10 and  order.can_pay_extra_orders == 0 %}{{order.deadline_extr_ord | ShortDateFormat}}{% else %}{{order.deadline | ShortDateFormat}}{% endif %}" readonly>
								</label>
							</div>
							<div class="dash-form-group">
								<label>
									Price
									<input type="text" name="price"  id="price" value="${% if order.id_extr_ord and order.id_order_status == 10 and  order.can_pay_extra_orders == 0 %}{{order.final_order_surcharge}}{% else %}{{order.price}}{% endif %}" readonly>
	                                <input type="hidden" name="cupon" id="cupon" value="{% if order.id_extr_ord and order.id_order_status == 10 and  order.can_pay_extra_orders == 0 %}{{order.discount_code_extr_ord}}{% else %}{{order.discount_code}}{% endif %}">
								</label>
							</div>
						</div>
						<div class="dash-form-group">
							<label>
								Paper details
								{% autoescape false %}
									<textarea name="paperdetails"  id="paperdetails" readonly>{{order.paper_details}}</textarea>
								{% endautoescape %}
							</label>
						</div>
                        {% if (order.id_order_status == 1) or (order.id_order_status == 5) %}
                        	<div class="control-buttons bottom-control-button">
								<button class="edit-order bottom-control" id="bt_remove_order">Delete order</button>
							</div>
                        {% endif %}
					</form>
				</div>
				{% endfor %}
				<div class="dash-order-body-item" data-name="messages">
					<p class="info-p">This contact form allows you to communicate with your writer directly. Kindly note that this functionality is only available for orders with the status “Paid”.</p>
					<div>
						<div class="dash-form-group">
							<label>
								Subject
								<input type="text" name="subject" id="subject">
								{% for order in orderslist %}
									<input type="hidden" name="order__id" id="order__id" value="{{order.uid}}">
								{% endfor %}
							</label>
						</div>
						<div class="dash-form-group">
							<label>
								Message
								<textarea name="bodymessage" id="bodymessage"></textarea>
							</label>
						</div>
						<div class="control-buttons bottom-control-button">
							<button class="bottom-control" id="sendMessageFromOrder">Send</button>
						</div>
					</div>
					<div class="messages-table">
						{% if messages %}
						<table>
							<thead>
								<tr>
									<th>Time</th>
									<th>Subject</th>
									<th>Messages</th>
								</tr>
							</thead>
							<tbody>
							{% for message in messages %}
								<tr>
									<td>{{message.date}}</td>
									<td>{{message.subject}}</td>
									<td>{{message.message}}</td>
								</tr>
							{% endfor %}
							</tbody>
						</table>
						{% endif %}
					</div>
				</div>
				<div class="dash-order-body-item upload-container" data-name="files">
					<p class="info-p">Here you can upload additional files required for the completion of your order. These files will be sent directly to your writer.</p>
                    <p class="info-p hide" id="tooltiploadfile">
                        <i>Selected files will be uploaded and attached to your order automatically. You can upload any text files or images.</i>
                    </p>
					<form action="/upload" enctype="multipart/form-data" method="POST" id="upload-file">
						<input type="file" style="opacity: 0; display: none;" name="file" multiple>
						<div class="info-upload">
							Select file to upload:
							<i class="fa fa-cloud-download" style="font-size: 35px!important; margin-left: 10px; margin-right: 30px;"></i>
							<div class="block-hide first-block"></div>
							<button id="select-file">Select file</button>
							<div class="block-hide"></div>
							{% for order in orderslist %}
                            	<input type="hidden" name="orderid" id="orderid" value="{{order.id}}">
	                        {% endfor %}
							<input type="hidden" id="ajax_loader_file" name="ajax_loader_file" value="1">
							<button id="upload-file-submit">Upload</button>
						</div>
					</form>
                    <p class="info-p" id="status-upload" style=" margin-top: 10px;margin-bottom: 0; padding-bottom: 0px;">
                    		Maximum upload file size: 100MB.
                    		<i style="font-family: 'Glyphicons Halflings'; float: none; margin-left: 0;" class="glyphicon glyphicon-question-sign info_label" aria-hidden="true" data-original-title="You can upload types of files listed: txt, zip, doc, docx, xls, xlsx, rtf, jpeg, jpg, png, gif, ppt, pptx, csv, pdf"></i>
                    </p>
                    <ul class="list-files-after-upload" style="display: none;">
                    </ul>
					<div class="messages-table load_file_table">
						<table>
							<thead>
								<tr>
									<th>Time</th>
									<th>File</th>
									<th>Actions</th>
								</tr>
							</thead>
							<tbody id="load_files">
						{% if wfiles %}
							{% for file in wfiles %}
								<tr>
									<td>{{file.date}}</td>
									<td>{{file.name}}</td>
									<td><a href="/download?file={{file.path}}&name={{file.name}}" type="button" class="btn btn-primary">Download</a></td>
								</tr>
							{% endfor %}
								
						{% endif %}
						{% if cfiles %}
							{% for file in cfiles %}
							<tr>
								<td>
								{% if file.date %}
									{{file.date}}
								{% endif %}
								</td>
								<td>{{file.name}}</td>
								<td>
									<a href="/download_customer?file={{file.path}}&name={{file.name}}" type="button" class="btn btn-primary">Download</a>
									<a href="#" type="button" class="fa fa-trash btn btn-danger removefilecustomer" value="{{file.path}}" style="margin-left: 5px;"></a></td>
							</tr>
							{% endfor %}
						{% endif %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div id="dash-modal" style="display: none;">
	{% for order in orderslist %}
    <form action="#" name="form_editorder" id="form_editorder" class="dash-modal-window" method="POST" enctype="multipart/form-data"> 
        <div class="dash-form-group dooble-dash-form">
            <label>
            	Type of work:
            	<i class="glyphicon glyphicon-question-sign info_label" style="visibility: hidden;" aria-hidden="true" data-original-title="Select the most suitable subject for your paper. If the necessary subject is not listed, contact us via the live support chat and we will help you choose."></i>
            	<select name="workType" class="modalselect changePrice" {%- if order.id_assignment == 18 -%} disabled {%- endif %}>
	        		<option value="2"{% if (order.type_work == 2) %} selected="selected" {% endif %}>Writing from scratch</option>
	        		<option value="1" {% if (order.type_work == 2) %} selected="selected" {% endif %}>Editing</option>
            	</select>
            	{%- if order.id_assignment == 18 -%}
					<input type="hidden" name="workType" value="2">
            	{%- endif %}
            </label> 
        </div>
        <div class="dash-form-group dooble-dash-form"> 
            <label>
               	Type of paper:
            	<i class="glyphicon glyphicon-question-sign info_label" aria-hidden="true" data-original-title="Select the most suitable type of paper needed. If the necessary type is not listed, contact us via the live support chat and we will help you choose." {%- if order.id_assignment == 18 -%} style="visibility: hidden;" {%- endif %}></i>
				<select name="paperType" id="paperType" class="modalselect" {%- if order.id_assignment == 18 -%} disabled {%- endif %}> 
                    <option value="1">Essay</option>
		            <option value="2">Coursework</option>
		            <option value="3">Term Paper</option>
		            <option value="4">Research Paper</option>
		            <option value="5">Book Report</option>
		            <option value="6">Movie Review</option>
		            <option value="7">Case Study</option>
		            <option value="8">Annotated Bibliography</option>
		            <option value="9">Article</option>
		            <option value="10">Assignment</option>
		            <option value="11">Dissertation</option>
		            <option value="12">Lab Report</option>
		            <option value="13">Math Problem</option>
		            <option value="14">Presentations</option>
		            <option value="15">Speech</option>
		            <option value="16">Statistics Report</option>
		            <option value="17">Power Point Presentation</option>
		            {%- if order.id_assignment == 18 -%} 
		            	<option value="18">CV</option>						
		            {%- endif %}
                </select>
                {%- if order.id_assignment == 18 -%}
					<input type="hidden" name="paperType" value="18">
            	{%- endif %}
            </label>
        </div> 
        <div class="dash-form-group dooble-dash-form"> 
            <label>
            	Subject
            	<i class="glyphicon glyphicon-question-sign info_label" aria-hidden="true" data-original-title="Select the most suitable subject for your paper. If the necessary subject is not listed, contact us via the live support chat and we will help you choose." {%- if order.id_assignment == 18 -%} style="visibility: hidden;" {%- endif %}></i>
				<select name="subject" id="subjectorder" class="modalselect" data-live-search="true" {%- if order.id_assignment == 18 -%} disabled {%- endif %}> 
                     <option value="44">Agriculture</option>
                     <option value="27">Anthropology</option>
                     <option value="28">Archeology</option>
                        <option value="45">Architecture</option>
                        <option value="36">Astronomy</option>
                        <option value="1">Biology and Life Sciences</option>
                        <option value="2">Business and Management</option>
                        <option value="3">Chemistry</option>
                        <option value="41">Computer sciences and Information technology</option>
                        <option value="4">Culture</option>
                        <option value="46">Design and Technology</option>
                        <option value="38">Earth and Space sciences</option>
                        <option value="53">E-commerce</option>
                        <option value="5">Economics</option>
                        <option value="6">Education</option>
                        <option value="47">Engineering and Construction</option>
                        <option value="7">English</option>
                        <option value="8">Environmental Science</option>
                        <option value="29">Ethics</option>
                        <option value="49">Family and consumer science</option>
                        <option value="9">Finance, Accounting and Banking</option>
                        <option value="33">Gender &amp; Sexual Studies</option>
                        <option value="10">Geography</option>
                        <option value="50">Health sciences and medicine</option>
                        <option value="12">History and Anthropology</option>
                        <option value="13">HRM</option>
                        <option value="34">Human Resources (HR)</option>
                        <option value="14">International Relations</option>
                        <option value="15">IT</option>
                        <option value="35">Journalism, mass media and communication</option>
                        <option value="16">Law and International Law</option>
                        <option value="17">Linguistics</option>
                        <option value="18">Literature</option>
                        <option value="42">Logic and programming</option>
                        <option value="55">Logistics</option>
                        <option value="56">Macro &amp; Micro economics</option>
                        <option value="57">Management</option>
                        <option value="19">Marketing and PR</option>
                        <option value="39">Mathematics</option>
                        <option value="40">Microbiology</option>
                        <option value="51">Military sciences</option>
                        <option value="30">Music</option>
                        <option value="21">Philosophy</option>
                        <option value="22">Physics</option>
                        <option value="23">Political Science</option>
                        <option value="24">Psychology</option>
                        <option value="31">Religion and Theology</option>
                        <option value="25">Sociology</option>
                        <option value="26">Statistics</option>
                        <option value="43">Systems science</option>
                        <option value="58">Tourism</option>
                        <option value="32">Visual Arts and Film Studies</option>
                </select>
                {%- if order.id_assignment == 18 -%}
					<input type="hidden" name="subject" value="7">
            	{%- endif %}
            </label>
        </div>
        <div class="dash-form-group dooble-dash-form"> 
            <label class="control-label-required">
            	Title:
				<i class="glyphicon glyphicon-question-sign info_label" aria-hidden="true" data-original-title="This is the topic of your paper. It must be short and clear. Alternatively, you can type in Writer\'s choice."></i>
                <input class="form-control" type="text" name="topic" id="topic" required>
            </label>
        </div>
        <div class="dash-form-group dooble-dash-form"> 
            <label>
               	Academic Level:
               	<i class="glyphicon glyphicon-question-sign info_label" aria-hidden="true" data-original-title="Select an appropriate academic level, which corresponds to your level of writing." {%- if order.id_assignment == 18 -%} style="visibility: hidden;" {%- endif %}></i>
                <select name="academicLevel" id="academicLevel" class="modalselect changePrice" style="width:100%;" {%- if order.id_assignment == 18 -%} disabled {%- endif %}> 
                    <option value="1">High school</option>
                    <option value="2">College</option>
                    <option value="3">University</option>
                    <option value="4">Master`s</option>
                    <option value="5">Ph.D.</option>
                </select>
                {%- if order.id_assignment == 18 -%}
					<input type="hidden" name="academicLevel" value="1">
            	{%- endif %}
            </label>
        </div>
        <div class="dash-form-group dooble-dash-form">
            <label>
               	Paper Format:
				<i class="glyphicon glyphicon-question-sign info_label" aria-hidden="true" data-original-title="Choose the style for your paper to be formatted in." {%- if order.id_assignment == 18 -%} style="visibility: hidden;" {%- endif %}></i>
                <select name="paperFormat" id="paperFormat" class="modalselect" style="width:100%;" {%- if order.id_assignment == 18 -%} disabled {%- endif %}> 
                    <option value="MLA">MLA</option>
                    <option value="APA">APA</option>
                    <option value="Chicago">Chicago</option>
                    <option value="Harvard">Harvard</option>
                    <option value="Other">Other</option>
                </select>
                {%- if order.id_assignment == 18 -%}
					<input type="hidden" name="paperFormat" value="MLA">
            	{%- endif %}
            </label>
        </div>
        <div class="dash-form-group page-3 controls-dash-form">
           	Number of Pages:
			<i class="glyphicon glyphicon-question-sign info_label" aria-hidden="true" data-original-title="Select the required number of pages (1 page is approximately 300 words). If you need a PowerPoint Presentation, please select the number of slides (1 page = 2 slides). If you need a non-writing assignment (e.g. Math Problem), contact us via the live support chat and we will help you." {%- if order.id_assignment == 18 -%} style="visibility: hidden;" {%- endif %}></i>
            <input id="pages" type="text" value="1" name="pages" maxlength="3" class="touchspiner changePrice" {%- if order.id_assignment == 18 -%} disabled {%- endif %}>
            {%- if order.id_assignment == 18 -%}
				<input type="hidden" name="pages" value="2">
        	{%- endif %}
        </div>
        <div class="dash-form-group page-3 controls-dash-form">
    		Number of sources:
       		<i class="glyphicon glyphicon-question-sign info_label" aria-hidden="true" data-original-title="Specify the number of sources to be used, if required." {%- if order.id_assignment == 18 -%} style="visibility: hidden;" {%- endif %}></i>
            <input id="sources" type="text" value="0" name="sources" class="touchspiner_sourse" {%- if order.id_assignment == 18 -%} disabled {%- endif %}>
            {%- if order.id_assignment == 18 -%}
				<input type="hidden" name="sources" value="0">
        	{%- endif %}
        </div>
        <div class="dash-form-group page-3">
            <label>Spacing:<i class="glyphicon glyphicon-question-sign info_label" style="visibility: hidden;" aria-hidden="true" data-original-title="Specify the number of sources to be used, if required." {%- if order.id_assignment == 18 -%} style="visibility: hidden;" {%- endif %}></i></label>
            <div class="btn-group btn-group-justified" role="group">
            	<input id="spaced1" type="radio" name="spaced" value="1" checked class="changePrice" {%- if order.id_assignment == 18 -%} disabled {%- endif %}>
				<label class="radio-inline info_label2" for="spaced1" data-original-title="600 words per page.">Single</label> 
				<input id="spaced2" type="radio" name="spaced" value="2" class="changePrice" {%- if order.id_assignment == 18 -%} disabled {%- endif %}>
				<label class="radio-inline info_label2" for="spaced2" data-original-title="300 words per page.">Double</label>
			</div> 
			{%- if order.id_assignment == 18 -%}
				<input type="hidden" name="spaced" value="{{ order.spaced }}">
        	{%- endif %}
        </div> 
        <div class="dash-form-group" style="clear: both;">
            <label>
            	Paper details:
            	<i class="glyphicon glyphicon-question-sign info_label" aria-hidden="true" data-original-title="To ensure that the final paper meets your requirements, make sure that your instructions are as accurate and detailed as possible. This will decrease the chance of revisions."></i>
            </label>
            <textarea class="form-control" name="paperDetails" id="paperDetails"></textarea>
        </div>
        <div class="dash-form-group dooble-dash-form" style="position: relative;"> 
        	<label class="control-label-required">Deadline: <i class="glyphicon glyphicon-question-sign info_label" aria-hidden="true" data-original-title="The deadline starts from the moment you get a confirmation email that your payment was successfully received. When choosing the deadline, kindly consider that it takes 1 hour to write 1 page of quality text." {%- if order.id_assignment == 18 -%} style="visibility: hidden;" {%- endif %}></i></label>
            <input class="form-control datepicker changePrice" onkeydown="return false;" type="text" name="deadlineDate" required id="deadlineDateform" {%- if order.id_assignment == 18 -%} disabled {%- endif %}>
            {%- if order.id_assignment == 18 -%}
				<input type="hidden" name="deadlineDate" value="{% if order.id_extr_ord and order.id_order_status == 10 and  order.can_pay_extra_orders == 0 %}{{order.deadline_extr_ord | ShortDateFormat}}{% else %}{{order.deadline | ShortDateFormat}}{% endif %}">
        	{%- endif %}
        </div>
        <div class="dash-form-group dooble-dash-form discount-cont" {%- if order.id_assignment == 18 -%} style="visibility: hidden;" {%- endif %}> 
            <label>Discount: <i class="glyphicon glyphicon-question-sign info_label" aria-hidden="true" data-original-title="Insert your personal discount code (if you have one) in the field and press “APPLY” button."></i></label>
            <div>
            	<input type="text" name="discount" id="discount" class="form-control changePrice" maxlength="15">
            	<a href="#" class="link_decoration" id="appl_disc">Apply</a>
            </div>
        </div>
        <div class="dash-form-group" style="clear: both; padding-top: 20px; padding-bottom: 25px;">  
            <div class="alert alert-danger" role="alert"> 
                <span class="btn-lg btn-block btn-form-info" data-total-price id="total_price">Calculate the price!</span> 
            </div>
        </div> 
    </form> 
    {% endfor %}
</div>

<div id="revision-modal" style="display: none;">
    <div class="dash-modal-window">
        <form id="claimform">
            <div class="dash-form-group">
                <label class="title-label">
                    Select Category:
                </label>
                <input type="hidden" name="order__id" id="order__id" value="{% for order in orderslist %}{{order.uid}}{% endfor %}">
                <input type="hidden" name="id" id="orderid" class="form-control" value="{% for order in orderslist %}{{order.uid}}{% endfor %}">
                <div class="btn-group checkbox-modal">
                	{% for categ in rev_categ %}
                    <div class="btn btn-warning btn-sm chkbtn">
                    	<label>
                        	<input name="selcat2" type="checkbox" style="display: none;" autocomplete="off" value="{{categ.id}}">
                    		<div>{{categ.category}}</div>
                    	</label>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <div class="dash-form-group" title="How much do you expect the paper to change after the revision?">
                <label class="title-label">
                    My paper must be:
                </label>
                <div class="btn-group" data-toggle="buttons">
                	{% for levels in rev_levels %}
                    <label class="btn btn-info btn-sm chkbtn">
                    	<input name="aftrerrevision" type="radio" autocomplete="off" value="{{levels.id}}"> {{levels.level}}
                	</label>
                    {% endfor %}
                </div>
            </div>
            <div class="dash-form-group">
                <label class="title-label">
                    Please, describe your claim in detail:
                </label>
                <textarea class="form-control" rows="10" id="describeproblem" name="describeproblem" required></textarea>
            </div>
            {% for order in orderslist %}
            	<input type="hidden" name="idorder" id="orderid" value="{{order.uid}}">
            {% endfor %}
            <div class="dash-form-group">
<label class="title-label" id="upload-revision">
Attach Files (max size 100Mb.)
<i class="glyphicon glyphicon-question-sign info_label" id="info-file-load" aria-hidden="true" data-original-title="You can upload types of files listed: txt, zip, doc, docx, xls, xlsx, rtf, jpeg, jpg, png, gif, ppt, pptx, csv, pdf"></i>
</label>
<label>
<div class="file-input file-input-new">
<div class="kv-upload-progress hide"><div class="progress">
    <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%;">
        0%
     </div>
</div></div>
<div class="input-group ">
   <div tabindex="500" class="form-control file-caption  kv-fileinput-caption">
   <div class="file-caption-name"></div>
</div>

   <div class="input-group-btn">
       <button type="button" tabindex="500" title="Clear selected files" class="btn btn-default fileinput-remove fileinput-remove-button"><i class="glyphicon glyphicon-trash"></i> <span class="hidden-xs">Remove</span></button>
       <button type="button" tabindex="500" title="Abort ongoing upload" class="btn btn-default hide fileinput-cancel fileinput-cancel-button"><i class="glyphicon glyphicon-ban-circle"></i> <span class="hidden-xs">Cancel</span></button>
       <button type="submit" tabindex="500" title="Upload selected files" class="btn btn-default fileinput-upload fileinput-upload-button"><i class="glyphicon glyphicon-upload"></i> <span class="hidden-xs">Upload</span></button>
       <div tabindex="500" class="btn btn-primary btn-file"><i class="glyphicon glyphicon-folder-open"></i> <span class="hidden-xs">Browse …</span><input id="inputfl" type="file" class="file" onchange="inputflChange($(this))" multiple="" data-show-preview="false" name="inputfl[]" accept=".txt,.zip,.doc,.docx,.xls,.xlsx,.rtf,.jpeg,.jpg,.png,.gif,.ppt,.pptx,.csv,.pdf,"></div>
   </div>
</div></div>
</label>
</div>
        </form>
    </div>
</div>
<script>
	function getParameterByName(name, url) {
      if (!url) url = window.location.href;
      name = name.replace(/[\[\]]/g, "\\$&");
      var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
          results = regex.exec(url);
      if (!results) return null;
      if (!results[2]) return '';
      return decodeURIComponent(results[2].replace(/\+/g, " "));
  }
</script>
<script src="static/js/bootstrap.min.js" defer></script>
<script src="static/js/jquery.carouselHeight.js" defer></script>
<script src="static/js/jquery.bootstrap-touchspin.js" defer></script>

<script src="static/js/legacy.min.js" defer></script>
<script src="static/js/custombox.min.js" defer></script>
<script src="static/js/moment.js" defer></script>

<script src="static/js/bootstrap-select.js" defer></script>
<script src="static/js/bootstrap-datetimepicker.js" defer></script>
<script src="static/js/jquery.form.js" defer></script>
<script src="static/js/url.min.js" defer></script>
<script src="static/js/calc.js" defer></script>
<script src="static/js/order_scripts.js" defer></script>
<script src="static/js/app.js" defer></script>
<script src="static/js/bootbox.min.js" defer></script>

<script src="static/js/utils.js" defer></script>
<script src="static/js/editorder.js" defer></script>
<style>
	.modalselect{
		width: 100%;
	    max-width: 100%;
	    box-shadow: none;
	    -moz-box-sizing: border-box;
	    -webkit-box-sizing: border-box;
	    background: transparent;
	    box-sizing: border-box;
	    border: 1px solid #e8e8e8;
	    display: block;
	    width: 100%;
	    height: 40px;
	    padding: 6px 12px;
	    font-size: 14px;
	    line-height: 1.428571429;
	    color: #555;
	    background-color: #fff;
	    background-image: none;
	    -moz-border-radius: 4px;
	    -webkit-border-radius: 4px;
	    -o-border-radius: 4px;
	    -ms-border-radius: 4px;
	    border-radius: 4px;
	    -moz-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
	    -webkit-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
	    -o-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
	    -ms-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
	    transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
	}
	.checkbox-modal .btn{
		height: 100%;
		width: 100%;
		padding: 0;
		border: 0;
	}
	.checkbox-modal .btn label div{
		border: 1px solid #4192bd;
		padding: 5px 10px;
		-moz-transition: background ease-in-out .15s,;
	    -webkit-transition: background ease-in-out .15s;
	    -o-transition: background ease-in-out .15s;
	    -ms-transition: background ease-in-out .15s;
	    transition: background ease-in-out .15s;
		-moz-border-radius: 3px;
	    -webkit-border-radius: 3px;
	    -o-border-radius: 3px;
	    -ms-border-radius: 3px;
	    border-radius: 3px;
	    cursor: pointer;
	}
	.checkbox-modal .btn label input:checked + div{
		background: #1d959e;
		color: #fff;
		border-color: #1d959e;
		box-shadow: inset 0 3px 5px rgba(0,0,0,0.125);
	}
</style>
<script>
	$('title').text('Orderinfo');
	var formatFile = ['txt', 'zip', 'doc', 'docx','xls', 'xlsx', 'rtf', 'jpeg', 'jpg', 'png', 'gif', 'ppt', 'pptx', 'csv', 'pdf'],
		setFile = [];
		acceptFile = '';

	for(var key in formatFile) {
		acceptFile += '.'+formatFile[key]+',';
	}

	$('#upload-file input[type="file"]').on('change', function(event) {
		var listFile = $(this)[0].files,
			list = '';

		setFile = [];
		for( var key in listFile ) {
			if( typeof listFile[key] == 'object') {
				if( listFile[key].size >= 104857600) {
					list += '<li class="more-max">'+listFile[key].name+'.<span> This file size more 100mb</span></li>';
				}else{
					for(var ind = 0; ind < formatFile.length; ind++) {

						var teststr = ( listFile[key].type != '' ) ? 
							listFile[key]['type'] : listFile[key].name.split('.')[listFile[key].name.split('.').length - 1],
							reg = new RegExp( formatFile[ind], 'gi');

						if( reg.test( teststr ) ) {
							setFile.push(listFile[key]);
							list += '<li>'+listFile[key].name+'</li>';
							break;
						}

						if(formatFile.length -1 == ind) {
							list += '<li class="invalid-format">'+listFile[key].name+'. <span>Invalid format</span></li>';
						}
					}
				}
			}
		}

		$('.list-files-after-upload').slideUp(100).html(list).slideDown(100);
		
	});
	$('#inputfl, #upload-file input[type="file"]').attr('accept', acceptFile);

	$('#upload-file button').click(function(event) {
		event.preventDefault();
	})

	$('#select-file').click(function() {
		$('#upload-file input[type="file"]').trigger('click');
	});

	$('#upload-file-submit').click(function(event) {
		if(!setFile.length) {
			return false;
		}

		var parent = $(this).parents('form'),
			form = new FormData();
		
		for(var key in setFile){
			form.append('file', setFile[key]);
		}
		form.append('orderid', $('#orderid').val());
		form.append('ajax_loader_file', $('#ajax_loader_file').val());

		$.ajax({
			url: parent.attr('action'),
			type: parent.attr('method'),
			contentType: false,
			processData: false,
			enctype: 'multipart/form-data',
			data: form,
			dataType: 'json',
			xhr: function() {
                var myXhr = $.ajaxSettings.xhr();
                $('#status-upload').append('<span id="file-progress"><i class="dash-icon dash-icons"></i><span>0%</span></span>');
                if(myXhr.upload){
                    myXhr.upload.addEventListener('progress',function(e) {
                    	if(e.lengthComputable){
					        var max = e.total;
					        var current = e.loaded;

					        var Percentage = (current * 100)/max;
					        Percentage = Math.round(Percentage);
					        $('#file-progress span').html(Percentage +"%");
					    }  
                    }, false);
                }
                return myXhr;
        	},
			success: function(data){
				var table = $('.load_file_table');
				var out = '';
				var name_obj = ( data['cfiles'].length ) ? data['cfiles'] : data['wfiles'];
				$('#file-progress').remove();
				for(var key in name_obj) {
					var date = moment(name_obj[key].date).format('YYYY-MM-DD h:mm:ss');
					var submit = '';
					if( data['cfiles'].length ) {
						submit = '<a href="/download_customer?file='+name_obj[key].name+'&name='+name_obj[key].name+'" type="button" class="btn btn-primary">Download</a><a href="#" type="button" class="fa fa-trash btn btn-danger removefilecustomer" value="'+name_obj[key].name+'" style="margin-left: 5px;"></a>';
					}else{
						submit = '<a href="/download?file='+name_obj[key].name+'&name='+name_obj[key].name+'" type="button" class="btn btn-primary">Download</a>';
					}
					out += '<tr><td>'+date+'</td><td>'+name_obj[key].name+'</td><td>'+submit+'</td></tr>'
				}

				if(table.find('table').length) {
					table.find('tbody').html(out);
				}else{
					table.html('<table><thead><tr><th>Time</th><th>File</th><th>Actions</th></tr></thead><tbody id="load_files">'+out+'</tbody></table>');
				}
				
				$('.list-files-after-upload').slideUp(200).html('');
			}
		});
	});

	$('.dash-order-item-anchor').click(function() {
		if( $(this).is('.open-anchor') ) {
			return false;
		}

		var to = $(this).data('to');

		$('.dash-order-item-anchor').removeClass('open-anchor');
		$(this).addClass('open-anchor');
		var h = $('.active-order-body').height();
		
		$('.dash-order-body-item').parent('div').css({'minHeight' : h});

		$('.dash-order-body-item').fadeOut(200).promise().done(function() {
			$(this).removeClass('active-order-body').filter('[data-name="'+to+'"]').fadeIn(200)
			.parent('div').css({'minHeight' : 'auto'});
		});


	});

</script>
{% assets "orderinfo2_js" %}
<!--script type="text/javascript" src="{{ ASSET_URL }}"></script-->
{% endassets %}
<script type="text/javascript">

$(document).ready(function() {
	var revision_modal = $('#revision-modal').html();
	$('#revision-modal').remove();

    $('#bt_rev').click(function() {
        var box = bootbox.dialog({
                title: "Submit for Revision.",
                message: revision_modal,
                closeButton: false,
                onEscape : true,
                buttons: {
                    cancel: {
                        label: "Cancel",
                        className: "btn-default"
                    },
                    success: {
                        label: "Submit",
                        className: "btn-success",
                        callback: function () {
                            if($("#claimform input[type='checkbox']:checked").length === 0){
                                ExampleWarning.show("Please select at least one Category");
                                return false;
                            }
                            if($("#claimform input[type='radio']:checked").length === 0){
                                ExampleWarning.show("Please select how much you expect your paper to change after the revision");
                                return false;
                            }
                            if( $("#describeproblem").val().length === 0 ){
                                ExampleWarning.show("Please let us know what exactly is wrong with the paper you received.");
                                return false;
                            }else{
                                var FormData1 = new FormData($('#claimform')[0]);

                                $.ajax({
                                    url: "/utils",
                                    type: "POST",
                                    data: FormData1,
                                    contentType: false,
                                    cache: false,
                                    processData: false,
                                    xhr: function() {
						                var myXhr = $.ajaxSettings.xhr();
						                $('#upload-revision').append('<span id="file-progress"><i class="dash-icon dash-icons"></i><span>0%</span></span>');
						                if(myXhr.upload){
						                    myXhr.upload.addEventListener('progress',function(e) {
						                    	if(e.lengthComputable){
											        var max = e.total;
											        var current = e.loaded;

											        var Percentage = (current * 100)/max;
											        Percentage = Math.round(Percentage);
											        $('#file-progress span').html(Percentage +"%");
											    }  
						                    }, false);
						                }
						                return myXhr;
						        	},
                                    success: function(data){
                                    	$('#file-progress').remove();
                                        $('.bootbox.modal, .modal-backdrop').slideUp(200);
                                        $('body').removeClass('modal-open').css({'paddingRight' : 0});
                                        ExampleSuccess.show("Your revision request has been succesfully submitted.");
                                    },
                                    error: function() {
                                        $('#load_content').hide();
                                        ExampleDanger.show("Oops something went wrong... Please contact us via email or live chat for resolution.");
                                    }
                                });
                                return false;
                            }
                        }
                    }
                }
            }
        );
        box.on("shown.bs.modal", function() {
            $('#load_content').hide();

            $('.info_label').tooltip({
                animation: true,
                placement: 'bottom',
                container: 'body'}).on('shown.bs.tooltip', function (e) {
                    var trg = e.target
                    if('ontouchstart' in window)
                    {
                        setTimeout(function() {
                            $(trg).tooltip('hide');
                        }, 3000);
                    }
                });
        });
    });
    
    $('.info_label3').tooltip({
        animation: true,
        placement: 'bottom',
        container: 'body'
    }).on('shown.bs.tooltip', function (e) {
        var trg = e.target
        if('ontouchstart' in window)
        {
            setTimeout(function() {
                $(trg).tooltip('hide');
            }, 3000);
        }
    });

    var edit_modal_text = $('#dash-modal').html();
    $('#dash-modal').remove();

    $('#bt_edit_order').click(function() {
        var box = bootbox.dialog({
                title: "Edit order.",
                message: edit_modal_text,
                buttons: {
                    cancel: {
                        label: "Cancel",
                        className: "btn-default"
                    },
                    success: {
                        label: "Update",
                        className: "btn-success",
                        callback: function () {
                            if ($("#paperDetails").val().replace(/[_\W]+/g, "").replace(/\s/g, '').length === 0){
                                ExampleWarning.show("Please input Paper details.");
                                return false;
                            }
                            if ($("#topic").val().replace(/[_\W]+/g, "").replace(/\s/g, '').length === 0){
                                ExampleWarning.show("Please sinput Title");
                                return false;
                            }
                            $('#load_content').show();
                            var FormData1 = new FormData($('#form_editorder')[0]);
							FormData1.append('idorder','{% for order in orderslist %}{{order.uid}}{% endfor %}');
                            FormData1.append('_editorder',1);
                            $.ajax({
                                    url: "/utils",
                                    type: "POST",
                                    data:  FormData1,
                                    contentType: false,
                                    cache: false,
                                    processData:false,
                                    success: function(data){
                                        $('#load_content').hide();
                                        var currentLocation = $(location).attr('href'),
                                        	substr = '&edit=';

                                        if (currentLocation.indexOf(substr) > -1){
                                            currentLocation =currentLocation.replace(substr,'&goodedit=');
                                            location.href= currentLocation;
                                        } else {
                                            setTimeout(function(){location.reload();}, 1000);
                                        }
                                    },
                                    beforeSend: function(){
                                        $('#load_content').hide();
                                        ExampleSuccess.show("Your order is now being updated. The page will reload automatically.");
                                    },
                                    error: function(err) {
                                        $('#load_content').hide();
                                        ExampleDanger.show("Oops, something wrong... Please contact us via email or live chat for resolution.");
                                    }
                               });
                        }
                    }
                }
            }
        );

        box.on("shown.bs.modal", function() {
            box.attr("id", "editorderdialog");
            $('#load_content').hide();
           
            var date = moment().format("YYYY-MM-DD");
            $('.selectpicker').selectpicker();
            $('.touchspiner').TouchSpin({initval: 1, min: 1});
            $('.touchspiner_sourse').TouchSpin({initval: 1, min: 0});
            $('.datepicker').datetimepicker({
                                                format: 'YYYY-MM-DD',
                                                minDate: date,
                                                defaultDate: date,
                                                showTodayButton: true
                                            });
           	$('.form-controls').tooltip({
		     							animation: true,
		     							placement: 'bottom',
		     							trigger: 'hover',
		     							container: 'body'}).on('shown.bs.tooltip', function (e) {
		     							    var trg = e.target
		     							    if('ontouchstart' in window)
		     							    {
		     							        setTimeout(function() {
		     							            $(trg).tooltip('hide');
		     							        }, 3000);
		     							    }
		     							});
            $('.info_label').tooltip({
                animation: true,
                placement: 'bottom',
                container: 'body'}).on('shown.bs.tooltip', function (e) {
                    var trg = e.target
                    if('ontouchstart' in window)
                    {
                        setTimeout(function() {
                            $(trg).tooltip('hide');
                        }, 3000);
                    }
                });

            $('.info_label2').tooltip({
                animation: true,
                placement: 'bottom',
                trigger: 'hover',
                container: 'body'}).on('shown.bs.tooltip', function (e) {
                    var trg = e.target
                    if('ontouchstart' in window)
                    {
                        setTimeout(function() {
                            $(trg).tooltip('hide');
                        }, 3000);
                    }
                });
            $('#deadlineDateform').val($('#deadline').val());
            $('#pages').val($('#numberofpages').val());
            $('#sources').val($('#numberofsources').val());
            $('#paperDetails').val($('#paperdetails').val());
            $('#topic').val($('#title').val());

            $('#subjectorder').val($('#subjectid').val());
            $('#academicLevel').val($('#academiclevelid').val());
            $('#paperFormat').val($('#paperformat').val());

            $('#total_price').html('Total price: <strong>'+$('#price').val()+'</strong>');

            if ($('#typeWork').val() == 1) {
                $('#workType2').prop('checked', true);
            }
            if ($('#typeWork').val() == 3) {
                $('#workType3').prop('checked', true);
            }
            if ($('#typeWork').val() == 2) {
                $('#workType1').prop('checked', true);
            }

            if ($('#spaceinorder').val() == 1) {
                $('#spaced1').prop('checked', true);
            }
            else {
                $('#spaced2').prop('checked', true);
            }

            $(".datepicker").on("dp.change", function(e) {
                UpdPrc(1);
            }).on("dp.show", function () {
				$("span.glyphicon.glyphicon-screenshot").click(function (event) {
					setTimeout(function () {
						$(".datepicker").data("DateTimePicker").hide();
					}, 100);
				})
			});

            $('#appl_disc').click(function () {
                if ($("#discount").val() != '') {
                    var discountcode = $("#discount").val();
                    var formData = "discountcode=" + discountcode;
                    var result = "";
                    $.ajax(
                        {
                            url: "/checkdiscount",
                            type: "POST",
                            data: formData,
                            success: function (data, textStatus, jqXHR) {
                                result = data;
                                if (result == "0") {
                                    ExampleWarning.show("Incorrect discount codе");
                                } else {
                                    UpdPrc(4);
                                }
                            }
                        });
                }
            });

            $(".changePrice, input[type=radio]").change(function(){
                if ($(this).attr('id') === "pages") {
                    inputValue = Math.round($("#pages").val());
                    if(isNaN(inputValue) || inputValue < 1) {
                        $("#pages").val(1);
                    }
                }
                UpdPrc(5);
            });

            $("#sources").change(function(event) {
                inputValue = Math.round($("#sources").val());
                if(isNaN(inputValue) || inputValue < 0) {
                    $("#sources").val(0);
                }
                if ($.isEmptyObject($("#sources").val())){
                    $("#sources").val(0);
                }
            });        

            $('#paperType').val($('#assigmenttypeid').val());
            $('.selectpicker').selectpicker('refresh');

            $('<div />').addClass("text_bootbox").html('').insertBefore($( "button:contains('Update')" ));

        });
    });


});

function SetWorkType_Presentation(){
    $('.spacing_row').hide();
    $('.type_list_work').html('Number of Slides: ');
    $("#paperType option").each(function(){
        if ($(this).hasClass("present")){
            $(this).removeAttr("disabled");
        }
        else{
            $(this).attr('disabled',true);
        }
    });

    $("#paperType").val($("#paperType option.present").val());
    $('.selectpicker').selectpicker('refresh');
}

function SetWorkType_NotPresentation() {
    $('.spacing_row').show();
    $('.type_list_work').html('Number of Pages: ');
    $("#paperType option").each(function()
    {
        if ($(this).hasClass("present")){
            $(this).attr('disabled',true);
        }
        else{
            $(this).removeAttr("disabled");
        }
    });
    $("#paperType").val(1);
    $('.selectpicker').selectpicker('refresh');

}

function UpdPrc(id_proc) {
    var FormData2 = new FormData($('#form_editorder')[0]);
    FormData2.append('updprice',1);
    $.ajax({
        url: "/utils",
        type: "POST",
        data:  FormData2,
        dataType: 'json',
        contentType: false,
        cache: false,
        processData:false,
        success: function(data){
            $('#load_content').hide();
            $('#total_price').html('Total price: <strong>$'+data.price+'</strong>');
        },
        error: function() {
            $('#load_content').hide();
            ExampleDanger.show("Oops, something wrong... Please contact us via email or live chat for resolution.");
        }
    });
}

function inputflChange(el) {
	var names = '';
	for(var key = 0; key < el[0].files.length; key++) {
		names += (key) ? ', ' + el[0].files[key].name : el[0].files[key].name;
	}
	$('.kv-fileinput-caption .file-caption-name').html(names);
}
</script>
{% include "footer_include.html" %}

